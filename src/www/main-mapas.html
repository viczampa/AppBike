<html>
<head>
    <meta charset='utf-8'>
    <title></title>
    <link rel="stylesheet" href="ratchet-v2.0.2/css/ratchet.min.css">
    <style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
  #map {
    height: 100%;
  }
#floating-panel {
position: absolute;
top: 10px;
left: 25%;
z-index: 5;
background-color: #fff;
padding: 5px;
border: 1px solid #999;
text-align: center;
font-family: 'Roboto','sans-serif';
line-height: 30px;
padding-left: 10px;
}

</style>
</head>

<body>
    <section>
          <span id='actualLocation'></span>
          <span id='estimatedTime'></span>
          <input id="endereco" type="text" placeholder="EndereÃ§o">
                <button type="button" id="exibir" class="btn btn-negative btn-block">Exibir Mapa</button>
                <div id="map"></div>
          </section>

    <!--<script src="http://maps.google.com/maps/api/js?key=AIzaSyAqQ-IKc7Mx6z0F8Dk2dAsEijVQ6RE0HKg"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAqQ-IKc7Mx6z0F8Dk2dAsEijVQ6RE0HKg"></script>
    <script type="text/javascript">
    $('#exibir').click(function(){
      var lat,longi;
      //assim que abrir a te;a te,ps qie biscar a geocalizacao
      navigator.geolocation.getCurrentPosition(function(dados){
        //busca dados geografico
        //armazena em vars
        lat   = dados.coords.latitude;
        longi = dados.coords.longitude;

        var localizador    = new google.maps.Geocoder();
        var casaDoHenrique = new google.maps.LatLng(-23.640577699999998,-46.5326357);
        var local          = new google.maps.LatLng(lat,longi);

        localizador.geocode({"latLng":local},function(registro,status){
            if(status==google.maps.GeocoderStatus.OK){
                $("#endereco").val(registro[0].formatted_address);
            }
        });

      var directionsService = new google.maps.DirectionsService();
      var directionsDisplay = new google.maps.DirectionsRenderer();
      var map               = new google.maps.Map(document.getElementById('map'), {
        zoom: 7,
        center: {lat: lat, lng: longi}
      });

      directionsDisplay.setMap(map);
      calculateAndDisplayRoute(directionsService, directionsDisplay);

      function calculateAndDisplayRoute(){
        //inicio direction
        directionsService.route({
            origin: local,
            destination: casaDoHenrique,
            travelMode: google.maps.TravelMode.DRIVING
          },function(response, status) {
            if (status === google.maps.DirectionsStatus.OK) {
              console.log(response);
              directionsDisplay.setDirections(response);

            } else {
              window.alert('Directions request failed due to ' + status);
            }
          });
          }
        });


    });
    </script>

    <script src="jquery/jquery.min.js"></script>
    <link rel="stylesheet" href="ratchet-v2.0.2/js/ratchet.min.js">
    <script>





    </script>
</body>

</html>
